<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8">
<title>My Pet Store</title>
</head>
<body>
<div th:replace="common/top">

</div>

<div id="templatemo_main">


    <h2>Shopping Cart</h2>
    <form action="updateCartQuantities" method="post">
        <table id="table-4">
            <tr>
                <th><b>Item ID</b></th>
                <th><b>Product ID</b></th>
                <th><b>Description</b></th>
                <th><b>In Stock?</b></th>
                <th><b>Quantity</b></th>
                <th><b>List Price</b></th>
                <th><b>Total Cost</b></th>
                <th>&nbsp;</th>
            </tr>

            <c:if test="${sessionScope.cart.numberOfItems == 0}">
                <tr>
                    <td colspan="8"><b>Your cart is empty.</b></td>
                </tr>
            </c:if>

            <c:forEach var="cartItem" items="${sessionScope.cart.cartItems}">
                <tr>
                    <td>
                        <a href="viewItem?itemId=${cartItem.item.itemId}">${cartItem.item.itemId}</a>
                    </td>
                    <td>
                        ${cartItem.item.product.productId}
                    </td>
                    <td>
                        ${cartItem.item.attribute1} ${cartItem.item.attribute2}
                        ${cartItem.item.attribute3} ${cartItem.item.attribute4}
                        ${cartItem.item.attribute5} ${cartItem.item.product.name}
                    </td>
                    <td>
                        ${cartItem.inStock}
                    </td>
                    <td>
                        <input type="text" name="${cartItem.item.itemId}" value="${cartItem.quantity}" id="${cartItem.item.itemId}" onblur="updateQuantity('${cartItem.item.itemId}','${sessionScope.account.username}')"/>
                        <script type="text/javascript" src="js/update-quantity.js"></script>
                    </td>
                    <td id="listPrice"><fmt:formatNumber value="${cartItem.item.listPrice}"
                                                         pattern="$#,##0.00" /></td>
                    <td id="totalcost"><fmt:formatNumber value="${cartItem.total}"
                                                         pattern="$#,##0.00" /></td>
                    <td>
                        <a href="removeItemFromCart?cartItemId=${cartItem.item.itemId}" class="Button">Remove</a>
                    </td>

                </tr>
            </c:forEach>
            <tr>
                <td colspan="7">
                    Sub Total: <fmt:formatNumber
                        value="${sessionScope.cart.subTotal}" pattern="$#,##0.00" />

                </td>
                <td>&nbsp;</td>
            </tr>
        </table>
    </form>

    <c:if test="${sessionScope.cart.numberOfItems > 0}">
        <br>
        <div>
            <font size="3px"><a href="viewNewOrder" class="fa fa-shopping-cart">&nbsp&nbspProceed to Checkout</a></font>
        </div>
    </c:if>




    <div id="Separator">&nbsp;</div>
</div>

<div th:replace="common/buttom">

</div>
</body>
</html>